<!--
TODO -
	- Make downloadable files
	- Link to MYOU_PARAMS documentation
		- Write MYOU_PARAMS documentation
-->
##Your First Project

([Skip to the coding bit](#code))

Firstly, make a new folder called "myouprojects". This is where all your projects will go.

Then, go into your project folder and run the following command in your terminal, command prompt, or Nodejs Command Prompt (I will refer to all of these as terminal from now on): `npm install --save myou-engine`

You should also type `npm install -g webpack && npm install -g shelljs` if you don't have that yet. It's how we will build everything into a working project that can be seen in a browser.

Notice there is a new folder created inside your project folder. For the sake of this tutorial, make a small change in node\_modules/myou\_engine/engine/textures.coffee by opening that file in a text editor, and commenting out lines 20 and 21 that say

```coffeescript
if not Image?
    getPixels = require 'get-pixels/node-pixels.js'
```

They should look like this once you're done:
```coffeescript
#if not Image?
#    getPixels = require 'get-pixels/node-pixels.js'
```


Now, make a new folder in your project folder. This will be your first project in Myou. Call it rotatingcube.

Open Blender back up, click outside the welcome window in the middle to make it go away. Notice you already begin with a cube in the middle of the scene. This is all you need to begin.

Immediately, go to File > Export > Myou Engine. Export it into your rotatingcube directory under the name `data`. You should now have a new folder named `data` inside your rotatingcube directory.

Now, make a file called `main.coffee`. This is where the bulk of your code will go and will probably be the only thing you need to keep open.

After that, download [this](#) file and place it in the folder with main.coffee and data. These three things should be the only things in your rotatingcube folder.

<!--I put this here with the line break because I want the header to appear without being obscured by the bar at the top-->
<span id="code"></span>

<br></br>

---
###Finally some code

Good job making it this far, now it's time to write some things up.

Make a new folder in your rotatingcube folder, name it `static_files`. Inside the new folder, make a file called `myou.html`. Not much has to go in here, but it's still imperative to making the project viewable.

Paste this code into the new file:
<!--
```
<!DOCTYPE html>
<html>
	<head>
	    <title>myou</title>
	</head>
	<body style="margin:0;height:100vh">
	    <canvas id="myou" style="width:100%;height:100vh;position:absolute;top:0px"></canvas>
	    <script>
		    var script = document.createElement('script');
		    script.src = "myou.js?"+Math.random();
		    document.body.appendChild(script);
	    </script>
	</body>
</html>
```
-->
```html
<!DOCTYPE html>
<html>
	<head>
	    <title>myou</title>
	</head>
	<body style="margin:0;height:100vh">
	    <canvas id="myou" style="width:100%;height:100vh;position:absolute;top:0px"></canvas>
	    <script src="myou.js"></script>
	</body>
</html>
```

This sets up the page that will be housing your cube.

The most important parts of this are the lines for the canvas and script. Let's attack these two lines in reverse order.

The `<script>` tag is what HTML uses to recognize when Javascript is being written, or loaded from an external file. In this case, it's being loaded from the file: `myou.js`.

The line that comes before that is much more interesting. It is the line to define an HTML5 canvas. HTML5 is an update to HTML that included features like video and audio playback, dragging and dropping (for uploading files, for example), and the canvas. The canvas is an element that is used to draw graphics on the fly using Javascript.

Save this file and close it, and go back to your rotatingcube folder.

Now, open `main.coffee`. Bask in its blankness. The infinite nothing of the empty file. As beautiful as the emptiness may be, it's time to fill it up with something.

```coffeescript
require 'file?name=index.html!./static_files/myou.html'

{create_canvas, Myou, LogicBlock, sensors, actuators} =
    MyouEngine = require 'myou-engine'
{mat2, mat3, mat4, vec2, vec3, vec4, quat} = MyouEngine.glm
```

This is the first bit of code that goes into your file. It points to the html file you created previously, and tells Webpack to copy its contents into the destination directory. This copies into a new file which will be generated by Webpack, and shouldn't be edited.

```coffeescript
myou_params =
    data_dir: 'data'

canvas = document.getElementById('myou')
myou = new Myou canvas, myou_params
```

`myou_params` is a set of arguments that you can set for the Myou engine. You can see the list of arguments that can be set [here](#)


Then add this underneath that code. The indentation is very important here.

```
myou.load_scene('Scene', true).then (scene)->
    scene.enable_render()
    scene.logic_ticks.push (frame_duration)->

    scene.load_visible_objects().then ->
        scene.enable_physics()
```

When programming for the Myou engine, we use coffeescript. Coffeescript has a particular way of writing which uses indentation. When we write something like this:
```
box =  ->
	toys
```
the indent before `toys` tells us that they are inside of the function `box()`.

After the '=', you'll notice an arrow. That arrow tells us what the function `box()` will return.

So let's break down what's going on.

`myou.load_scene('Scene', true).then (scene)->`

This loads the scene, which is necessary for meshes to be loaded in.

`    scene.enable_render()`

This enables the scene, making it visible to the user.

`    scene.logic_ticks.push (frame_duration)->`

This starts a loop. There isn't anything in there yet, but this is where the fun stuff goes.


`    scene.load_visible_objects()`

This loads makes the objects visible (in this case, just the cube), after which you should see this:

<!--![Starting Cube](images/StartingCube.png =50%)-->
<img src="./images/StartingCube.png" style="width: 50%">

And there you go. You have your first Myou Engine project set up.

For a bit of extra fun, go back up to the line that reads

`    scene.logic_ticks.push (frame_duration)->`

And add the following lines after that one:

```
        q = scene.objects.Cube.rotation
        quat.rotateY(q, q, 0.01/16*frame_duration)
```

These lines go with an indent infront of them like so:

```
    scene.logic_ticks.push (frame_duration)->
        q = scene.objects.Cube.rotation
        quat.rotateY(q, q, 0.01/16*frame_duration)
```
What this does is use [quaternions](https://en.wikipedia.org/wiki/Quaternion) to rotate the cube, and it looks like this:

<img src="./images/SpinningStartingCube.gif" style="width: 50%">

First, it saves the orientation of the cube to the variable `q`. This serves no functional purpose, but makes writing it much, much easier and quicker. Otherwise, the two lines would only be one that read

`        quat.rotateY(scene.objects.Cube.rotation, scene.objects.Cube.rotation, 0.01/16*frame_duration)`.

Now, in the second line, "`quat.rotateY(q, q, 0.01/16*frame_duration)`" works by taking, in order, the variable it will output to (q), the variable it will change (also q), and the angle of change in radians.

Further explanation on quaternions can be found [here](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-17-quaternions/).

Implementation of the function `quat.rotateY` can be found [here](http://glmatrix.net/docs/quat.js.html#line292).

Documentation on the glMatrix `quat` element can be found [here](http://glmatrix.net/docs/quat.html)
